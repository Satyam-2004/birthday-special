<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday ‚Äî Salony üéÇ</title>
<style>
  :root {
    --bg:#0f1724;
    --card:#0b1220;
    --accent:#ff7ab6;
    --muted:#9aa4b2;
    --glass: rgba(255,255,255,0.04);
  }
  
  html, body {
    height: auto; /* Changed from 100% to auto for better overflow handling */
    min-height: 100vh; /* Ensures at least full viewport height */
    margin:0;
    font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Helvetica Neue",Arial;
  }
  
  body {
    background:linear-gradient(160deg,#071026 0%, #0b1b2b 60%);
    color:#e6eef7;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:16px;
  }
  
  .wrap {
    width:100%;
    max-width:980px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow:0 10px 30px rgba(2,6,23,0.6);
    border-radius:14px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.03);
  }
  
  header {
    display:flex;
    gap:12px;
    align-items:center;
    padding:14px 16px;
    background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    flex-wrap:wrap;
  }
  
  .avatar {
    width:56px;
    height:56px;
    border-radius:10px;
    background:linear-gradient(135deg,var(--accent),#6be7ff);
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:700;
    color:#021;
    box-shadow:0 4px 12px rgba(0,0,0,0.45);
  }
  
  h1 {
    margin:0;
    font-size:18px;
  }
  
  p.lead {
    margin:0;
    color:var(--muted);
    font-size:12px;
  }
  
  .main {
    display:grid;
    grid-template-columns:1fr 380px;
    gap:12px;
    padding:16px;
  }
  
  .card {
    background:var(--card);
    border-radius:10px;
    padding:14px;
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);
  }
  
  .big {
    font-size:18px;
    margin-bottom:6px;
  }
  
  .actions {
    display:flex;
    gap:8px;
    margin-top:10px;
    flex-wrap:wrap;
  }
  
  button {
    background:linear-gradient(90deg,var(--accent),#6be7ff);
    border:none;
    padding:8px 12px;
    border-radius:8px;
    color:#021;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(107,231,255,0.06);
    font-size:14px;
  }
  
  .muted {
    background:var(--glass);
    color:var(--muted);
    border:1px dashed rgba(255,255,255,0.02);
  }
  
  .right {
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  
  .countdown {
    display:flex;
    gap:6px;
    flex-wrap:wrap;
  }
  
  .countdown > div {
    background:rgba(255,255,255,0.02);
    padding:10px;
    border-radius:8px;
    min-width:64px;
    text-align:center;
    font-size:14px;
  }
  
  .label {
    font-size:11px;
    color:var(--muted);
    margin-top:4px;
  }
  
  .gallery {
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:6px;
  }
  
  .gallery img {
    width:100%;
    height:80px;
    object-fit:cover;
    border-radius:6px;
    display:block;
  }
  
  .reveal {
    padding:10px;
    background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:8px;
  }
  
  .envelopes {
    display:flex;
    gap:6px;
    flex-wrap:wrap;
  }
  
  .env {
    background:linear-gradient(180deg,#071726, #092737);
    padding:10px;
    border-radius:6px;
    cursor:pointer;
    flex:1;
    min-width:100px;
    text-align:center;
    border:1px solid rgba(255,255,255,0.02);
    font-size:13px;
  }
  
  footer {
    padding:12px 16px;
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.03));
    display:flex;
    justify-content:space-between;
    align-items:center;
    flex-wrap:wrap;
    gap:8px;
  }
  
  .small {
    font-size:12px;
    color:var(--muted);
  }
  
  .center {
    display:flex;
    align-items:center;
    justify-content:center;
  }
  
  .hidden {
    display:none;
  }
  
  /* Mobile adjustments */
  @media (max-width:900px) {
    .main {
      grid-template-columns:1fr;
    }
    .right {
      order:2;
    }
  }
  
  @media (max-width:600px) {
    h1 { font-size:16px; }
    .big { font-size:16px; }
    button { font-size:12px; padding:6px 10px; }
    .avatar { width:48px; height:48px; font-size:16px; }
    .gallery img { height:70px; }
    body {
      align-items: flex-start; /* Align to top on mobile to prevent top cutoff */
    }
  }
</style>
</head>
<body>
<div class="confetti" id="confetti"></div>
<div class="wrap" role="application" aria-label="Birthday surprise">
  <header>
    <div class="avatar">
      <img src="images/profile.jpg" alt="Avatar" style="width:100%;height:100%;border-radius:10px;object-fit:cover;">
    </div>
    <div style="flex:1">
      <h1>Happy Birthday, Salony üéÇ</h1>
      <p class="lead">A little surprise made with a lot of care.</p>
    </div>
    <div style="text-align:right">
      <div class="small">From: <strong>Your Maamu</strong></div>
      <div class="small">Date: <strong>17 Aug</strong></div>
    </div>
  </header>

  <div class="main">
    <section class="card">
      <div class="big">A tiny midnight plan</div>
      <div class="small">Open the envelopes ‚Äî each one hides a short wish or memory for you. When you're ready, press play to hear something I recorded.</div>

      <div style="margin-top:12px" class="reveal">
        <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
          <div>
            <div class="small">Birthday mood</div>
            <strong>Warm, silly & calm</strong>
          </div>
          <div style="text-align:right">
            <div class="small">Mood song</div>
            <strong id="songtitle">gentle breeze</strong>
          </div>
        </div>

        <div class="actions">
          <button id="playAudio">Play message</button>
          <button class="muted" id="startConfetti">Surprise!</button>
          <button class="muted" id="downloadCard">Download PDF</button>
        </div>
      </div>

      <hr style="border:none;height:14px" />
      <div style="margin-top:6px">
        <div class="small">Open an envelope</div>
        <div class="envelopes" id="envs">
          <div class="env" data-msg="I know days like this can feel like the sky is too heavy and the world too quiet. But listen to me ‚Äî you‚Äôve survived 100% of your bad days so far, and that‚Äôs a streak worth bragging about. I might not be sitting next to you right now, but I‚Äôm still here ‚Äî always rooting for you, always believing in you, always a message away. So breathe‚Ä¶ the sadness is temporary, but you? You‚Äôre built to outshine it.">Open when sad</div>
          <div class="env" data-msg="Okay, first of all ‚Äî how are you bored? You have an entire brain full of random thoughts, sarcasm, and chaos. üòèSo here‚Äôs the deal: go listen to your favorite song (the one that makes you dance without thinking). Or watch something so dumb you laugh till your stomach hurts. Or text me and I‚Äôll send you memes so bad they‚Äôre actually good. Life‚Äôs too short to be bored ‚Äî so go do something small but fun‚Ä¶ even if it‚Äôs just making a weird face in the mirror.">Open when bored</div>
          <div class="env" data-msg="Close your eyes for a second. Inhale slow. Exhale slower. You‚Äôve been doing so much, carrying so many things ‚Äî and maybe you don‚Äôt even notice how strong you are. But I do. It‚Äôs okay to stop for a while, it‚Äôs okay to rest. You‚Äôre not falling behind; you‚Äôre just recharging so you can come back stronger. The world can wait ‚Äî right now, it‚Äôs you-time.">Open when tired</div>
          <div class="env" data-msg="Hey‚Ä¶ I know it feels like everything is too big, too uncertain, too much right now. But you‚Äôve fought your way through fears before ‚Äî and you‚Äôve always made it out stronger. Fear is just your mind‚Äôs way of saying, ‚ÄúThis matters to you.‚Äù So hold my words like a shield: you are safe, you are capable, and you are never truly alone in this. Whatever‚Äôs ahead, you‚Äôll handle it ‚Äî step by step.">Open when scared</div>
        </div>
      </div>

      <div style="margin-top:12px">
        <div class="small">Add your own photo (optional) ‚Äî will appear in the gallery</div>
        <label class="muted center" for="addphoto" style="cursor:pointer;padding:8px;border-radius:8px">+ Add photo</label>
        <input id="addphoto" type="file" accept="image/*"/>
      </div>

      <div style="margin-top:12px">
        <div class="small">Gallery</div>
        <div class="gallery" id="gallery">
          <img src="images/DSC_0786.jpg" alt="gallery photo">
          <img src="images/DSC_0826.jpg" alt="gallery photo">
          <img src="images/DSC_0931.jpg" alt="gallery photo">
        </div>
      </div>
    </section>

    <aside class="right">
      <div class="card">
        <div class="big">Countdown to your day</div>
        <div class="countdown" id="countdown">
          <div><div id="days">00</div><div class="label">Days</div></div>
          <div><div id="hours">00</div><div class="label">Hours</div></div>
          <div><div id="mins">00</div><div class="label">Minutes</div></div>
          <div><div id="secs">00</div><div class="label">Seconds</div></div>
        </div>
        <div class="small" style="margin-top:8px">Local time will be used.</div>
      </div>

      <div class="card">
        <div class="big">Quick wishes</div>
        <div id="quotes">
          <div class="small">‚ÄúYou‚Äôre quietly brilliant ‚Äî keep going.‚Äù</div>
          <div class="small">‚ÄúMay your days be softer and your smile louder.‚Äù</div>
          <div class="small">‚ÄúYou deserve peace, even on the loudest days.‚Äù</div>
        </div>
        <div style="margin-top:10px" class="actions">
          <button id="nextQuote" class="muted">Next</button>
          <button id="copyQuote" class="muted">Copy</button>
        </div>
      </div>

      <div class="card">
        <div class="big">Secret wish box</div>
        <div class="small">Type one thing you wish for her and press Save ‚Äî it becomes a small star on the top banner.</div>
        <input id="wish" placeholder="I wish you..." style="width:100%;padding:8px;border-radius:8px;margin-top:8px;border:none;background:rgba(255,255,255,0.02);color:#e6eef7"/>
        <div style="margin-top:8px" class="actions"><button id="saveWish">Save</button></div>
      </div>
    </aside>
  </div>

  <footer>
    <div class="small">A little corner made with care ‚Äî midnight surprise.</div>
    <div>
      <button id="themeToggle" class="muted">Toggle theme</button>
    </div>
  </footer>
</div>

<!-- Audio & confetti scripts -->
<audio id="audio" preload="auto">
  <source src="images/birthday_song.mp3" type="audio/mpeg">
</audio>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
// Simple utilities
const envs = document.getElementById('envs');
const gallery = document.getElementById('gallery');
const addphoto = document.getElementById('addphoto');
const audio = document.getElementById('audio');
const playAudio = document.getElementById('playAudio');
const confettiEl = document.getElementById('confetti');
const startConfetti = document.getElementById('startConfetti');
const daysEl = document.getElementById('days'), hoursEl = document.getElementById('hours'), minsEl = document.getElementById('mins'), secsEl = document.getElementById('secs');
const quotes = ["You‚Äôre quietly brilliant ‚Äî keep going.","May your days be softer and your smile louder.","You deserve peace, even on the loudest days.","You make ordinary things special.","Keep being your honest, kind self."];

// Load saved gallery from localStorage
function loadGallery() {
  const saved = JSON.parse(localStorage.getItem('birthdayGallery') || '[]');
  saved.forEach(src => {
    const img = document.createElement('img');
    img.src = src;
    img.alt = 'user-photo';
    gallery.appendChild(img);
  });
}
loadGallery();

// Envelopes open
envs.addEventListener('click', (e)=>{
  const el = e.target.closest('.env');
  if(!el) return;
  const msg = el.dataset.msg || "Open when you need a hug.";
  alert(msg);
});

// Add photo to gallery & save in localStorage
addphoto.addEventListener('change', (e)=>{
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = function(evt) {
    const saved = JSON.parse(localStorage.getItem('birthdayGallery') || '[]');
    saved.unshift(evt.target.result); // add to start
    localStorage.setItem('birthdayGallery', JSON.stringify(saved));
    loadGallery();
  };
  reader.readAsDataURL(file);
});

// Audio play
playAudio.addEventListener('click', ()=>{
  audio.currentTime = 0; audio.play();
  playAudio.textContent = "Playing...";
  setTimeout(()=>playAudio.textContent = "Play message", 2500);
});

// Confetti (simple)
function makeParticle(x,y,clr){
  const p = document.createElement('div');
  p.style.position='absolute'; p.style.left = x+'px'; p.style.top = y+'px';
  p.style.width='10px'; p.style.height='14px'; p.style.background = clr; p.style.opacity = 0.95;
  p.style.borderRadius = '2px'; p.style.transform = 'rotate('+Math.random()*360+'deg)';
  p.style.willChange = 'transform, top, left'; confettiEl.appendChild(p);
  const dy = (Math.random()*400 + 80);
  p.animate([{transform:'translateY(0px) rotate(0deg)'},{transform:'translateY('+dy+'px) rotate(600deg)'}],{duration:1200 + Math.random()*800, easing:'cubic-bezier(.2,.8,.2,1)'});
  setTimeout(()=>p.remove(), 2200);
}
startConfetti.addEventListener('click', ()=>{
  for(let i=0;i<60;i++){ setTimeout(()=> makeParticle(window.innerWidth*Math.random(), 40, ['#ff7ab6','#ffd56b','#6be7ff','#b6ffb3'][Math.floor(Math.random()*4)]), i*12); }
});

// Countdown target: 17 Aug this year at 00:00 local
function updateCountdown(){
  const now = new Date();
  const year = now.getFullYear();
  const target = new Date(year, 7, 17, 0,0,0);
  const diff = target - now;
  if(diff<=0){ daysEl.textContent='00'; hoursEl.textContent='00'; minsEl.textContent='00'; secsEl.textContent='00'; return; }
  const d = Math.floor(diff/86400000);
  const h = Math.floor(diff%86400000/3600000);
  const m = Math.floor(diff%3600000/60000);
  const s = Math.floor(diff%60000/1000);
  daysEl.textContent = String(d).padStart(2,'0');
  hoursEl.textContent = String(h).padStart(2,'0');
  minsEl.textContent = String(m).padStart(2,'0');
  secsEl.textContent = String(s).padStart(2,'0');
}
setInterval(updateCountdown,1000); updateCountdown();

// Quote actions
let qi = 0;
document.getElementById('nextQuote').addEventListener('click', ()=>{ qi = (qi+1)%quotes.length; document.getElementById('quotes').children[0].textContent = "‚Äú"+quotes[qi]+"‚Äù"; });
document.getElementById('copyQuote').addEventListener('click', ()=>{ navigator.clipboard.writeText(quotes[qi]); alert('Copied!'); });

// Save wish to banner
document.getElementById('saveWish').addEventListener('click', ()=>{
  const v = document.getElementById('wish').value.trim();
  if(!v) return alert('Type something sweet :)');
  const star = document.createElement('div');
  star.textContent='‚òÖ '+v;
  star.style.padding='6px 8px';
  star.style.background='linear-gradient(90deg,#ffd56b,#ff7ab6)';
  star.style.color='#021';
  star.style.borderRadius='8px';
  star.style.marginLeft='8px';
  document.querySelector('header').appendChild(star);
  document.getElementById('wish').value='';
  alert('Saved!');
});

// Download PDF card
document.getElementById('downloadCard').addEventListener('click', ()=>{
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const letter = `To the girl who brightens the dullest days,

There are so many things I could say about you, but words have this strange habit of falling short when the feelings are too big. You are not just a person I know ‚Äî you are a collection of moments, emotions, and memories that have shaped parts of me I didn‚Äôt even know existed.

I‚Äôve seen your strength ‚Äî the quiet kind that doesn‚Äôt shout but simply carries the weight of the world on its shoulders. I‚Äôve seen your kindness ‚Äî the type that slips into everyday actions so naturally that you probably don‚Äôt even notice it. And I‚Äôve seen your spark ‚Äî that light in your eyes when you talk about something you love, or when you‚Äôre laughing so freely that the world forgets its troubles for a while.

You inspire without trying. You care without keeping count. You give without expecting in return. And in a world where people often wear masks, you‚Äôve always been unapologetically yourself ‚Äî even on the hard days. That‚Äôs rare. That‚Äôs beautiful.

And though this letter is about you, I can‚Äôt help but say how much you mean to me. You‚Äôve been a safe place in a world that sometimes feels too loud. You‚Äôve listened when my words didn‚Äôt make sense, and you‚Äôve unknowingly helped me hold myself together just by being you. You‚Äôve taught me patience, understanding, and the value of showing up ‚Äî even when it‚Äôs not easy.

If I could bottle up the way you make people feel ‚Äî warm, understood, and a little more alive ‚Äî I would give it to everyone who‚Äôs ever felt alone. Because you have that magic. The kind that doesn‚Äôt fade with time or distance.

So today, and every day, I hope you know this: you are extraordinary. Not because of what you do, but because of who you are. And no matter where life takes you, I‚Äôll always be grateful that our paths crossed, and that I got to know the wonderful person you are.

Happy Birthday in advance, Madam.
Here‚Äôs to you ‚Äî to your laughter, your dreams, your late-night thoughts, your quiet strength, and your endless heart. You‚Äôre a masterpiece, and I‚Äôm lucky to have a seat in the gallery of your life.

With endless respect and care,
‚Äî Chhote Maamu`;
  doc.setFontSize(12);
  doc.text(letter, 10, 10, { maxWidth: 190, lineHeightFactor: 1.5 });
  doc.save('birthday-letter.pdf');
});

// Theme toggle
document.getElementById('themeToggle').addEventListener('click', ()=>{
  document.body.style.background = document.body.style.background ?
    'linear-gradient(160deg,#071026 0%, #0b1b2b 60%)' : '';
  alert('Theme toggled');
});
</script>
</body>
</html>
